# Armazenamento e banco de dados

## Armazenamento de inst√¢ncias

<p align=justify>O <b>armazenamento de inst√¢ncia</b> fornece um armazenamento tempor√°rio  a n√≠vel de bloco para uma inst√¢ncia do Amazon EC2. As informa√ß√µes s√£o armazenadas em disco f√≠sico anexo ao computador host para uma inst√¢ncia do EC2, possuindo a mesma vida √∫til da inst√¢ncia. Quando a inst√¢ncia √© encerrada todos os dados armazenados s√£o perdidos. N√£o √© recomendado para armazenamento de banco de dados, mas t√£o somente de informa√ß√µes que podem ser facilmente substitu√≠das, como caches, buffer e dados demais dados que podem ser recriados com facilidade.</p>

## Amazon Elastic Block Store (Amazon EBS)

<p align=justify id="block"> O <b>Amazon Elastic Block Store - Amazon EBS</b> √© um servi√ßo que fornece volumes de armazenamentos a n√≠vel de bloco que voc√™ pode usar com inst√¢ncias EC2. Aqui, caso voc√™ encerre a inst√¢ncia Amazon EC2, os dados n√£o s√£o comprometidos. E √© poss√≠vel interromper e reiniciar a transfer√™ncia de dados normalmente.</p>

<p align=justify>As configura√ß√µes (tamanho e tipo do volume) e a provis√£o ser√£o definidas pelo usu√°rio durante o processo de cria√ß√£o do volume do <b>EBS</b>, que pode ser anexado a uma inst√¢ncia do Amazon EC2.</p>

<p align=justify>Apesar disso √© recomend√°vel a realiza√ß√£o de backups complementares dos dados armazenados e, para isso, voc√™ pode criar um <b>snapshot do Amazon EBS</b>.</p>

<p align=justify>Um snapshot do EBS √© um backup complementar. Isso significa que o primeiro backup de um volume copia todos os dados, mas os pr√≥ximos somente copiar√£o os dados que foram alterados desde o snapshot anterior(mais recente). Esse tipo de backup √© diferente do backup completo, onde todos os dados armazenados s√£o copiados cada vez que ocorre um backup</p>

![Amazon EBS](/IMG/Snapshots-do-EBS.png)

## Amazon Simple Storage Service (Amazon S3)

<p align=justify>√© um servi√ßo que fornece armazenamento a n√≠vel do objeto. O Amazon S3 armazena dados como objetos em buckets.</p>

<p align=justify>√â poss√≠vel fazer upload de qualquer tipo de arquivo para o Amazon S3, como imagens, v√≠deos, arquivos de texto e at√© arquivos de backup. O Amazon s3 possui armazenamento ilimitado e o tamanho m√°ximo de arquivo para um objeto √© de 5TB üòÆ.</p>

<p align=justify>Ao fazer upload de um arquivo √© poss√≠vel definir permiss√µes para controlar a visibilidade e o acesso a ele. Voc√™ tamb√©m pode usar o recurso de versionamento para rastrear altera√ß√µes em seus objetos ao longo do tempo. No Amazon S3 voc√™ s√≥ paga pelo que for usado.</p>

<p align=justify>Existem v√°rias cat√©gorias de armazenamento de dados no Amazon S3.</p>

### S3 Standart: 

<p align=justify>um objeto armazenado no S3 tem uma porcentagem de 99,99999999%, A probabilidade que ele v√° permanecer intacto ap√≥s um per√≠odo de um ano √© muito alta. Al√©m disso os dados s√£o armazenados de uma maneira que a AWS possa sustentar a perda simult√¢nea de dados em duas instala√ß√µes de armazenamento separadas. Isso ocorre porque os dados s√£o armazenados em pelo menos tr√™s instala√ß√µes. o S3 Standard √© uma categoria de armazenamento ideal para dados acessados com frequ√™ncia, n√£o dados de arquivamento</p>

<p align=justify>Voc√™ tamb√©m pode armazenar sites est√°ticos fazendo upload de todo o seu HTML em um bucket e, em seguida, marcar em uma caixa para hosped√°-lo como um site est√°tico, Voc√™ deve ent√£o inserir a URL do Bucket.</p>

### S3 Standard-Infrequent Access (S3 Standard ‚Äì IA)

<p align=justify>√â usada para dados acessados com menos frequ√™ncia, mas que exigem rapidez quando necess√°rio. Isso significa que √© um local perfeito para armazenar backups, arquivos de recupera√ß√£o de desastres ou qualquer objeto que exija armazenamento a longo prazo. Semelhante ao S3 Standard, mas tem um pre√ßo de armazenamento mais baixo e um pre√ßo de recupera√ß√£o mais alto. <br> Os dados tamb√©m s√£o armazenados em, no m√≠nimo, tr√™s zonas de disponibilidade.</p>

### S3 One Zone-Infrequent Access (S3 One Zone ‚Äì IA)

<p align=justify>Armazena dados em uma √∫nica zona de disponibilidade e tem um pre√ßo de armazenamento menor do que o S3 Standard ‚Äì IA.</p>

### S3 Intelligent-Tiering (Estratifica√ß√£o inteligente do S3)

<p align=justify>Ideal para dados com padr√µes de acesso desconhecidos ou em altera√ß√£o. Nessa categoria o Amazon S3 monitora os padr√µes de acesso dos objetos. Se voc√™ n√£o acessou um objeto por 30 dias consecutivos, o Amazon S3 o move automaticamente para o n√≠vel de acesso pouco frequente, o S3 Standard ‚Äì IA. Se voc√™ acessar um objeto no n√≠vel de acesso pouco frequente, o Amazon S3 o mover√° automaticamente para o n√≠vel de acesso frequente, S3 Standard.</p>

### S3 Glacier

<p align=justify>O S3 Glacier √© uma categoria de armazenamento de baixo custo ideal para o arquivamento de dados. Por exemplo, voc√™ pode usar essa categoria de armazenamento para armazenar registros arquivados de clientes ou arquivos de fotos e v√≠deos mais antigos. Capaz de recuperar objetos em poucos minutos a horas</p>

### S3 Glacier Deep Archive

<p align=justify>Categoria de armazenamento de objetos de menor custo ideal para arquivamento. Ao decidir entre o Amazon S3 Glacier e o Amazon S3 Glacier Deep Archive, considere a prontid√£o com que voc√™ precisa recuperar objetos arquivados. √â poss√≠vel recuperar objetos armazenados na categoria de armazenamento do S3 Glacier dentro de alguns minutos a algumas horas. Em compara√ß√£o, √© poss√≠vel recuperar objetos armazenados na categoria de armazenamento do S3 Glacier Deep Archive em at√© 12 horas.</p>

***

<p align=justify>Voc√™ deve escolher conforme sua necessidade devendo levar em considera√ß√£o dois fatores:</p>

* A frequ√™ncia que voc√™ planeja recuperar seus dados.

* Qu√£o dispon√≠vel dseus dados precisam estar.

## Armazenamento de objetos

<p align=justify>No armazenamento de objetos, cada objeto consiste em dados, metadados e uma chave. Esses dados podem ser qualquer tipo de arquivo. Os metadados cont√™m as informa√ß√µes sobre o que s√£o os dados e como eles s√£o usados, bem como o tamanho do objeto. A chave de um objeto √© seu identificador √∫nico.</p>

<p align=justify>OBS: quando voc√™ modifica um arquivo no armazenamento de blocos, somente as partes que s√£o alteradas s√£o atualizadas. Isso n√£o ocorre com os objetos. Quando um arquivo de objetos √© modificado, todo o objeto √© atualizado.</p>

## Amazon EBS x Amazon S3

<p align=justify>Se voc√™ est√° executando um site de an√°lise de fotos onde os usu√°rios fazem upload de uma foto de si mesmos e sua aplica√ß√£o encontra os animais que se parecem com eles. Voc√™ tem potencialmente milh√µes de imagens de animais e todas precisam ser indexadas e possivelmente visualizadas por milhares de pessoas ao mesmo tempo. Esse √© o caso de uso perfeito para o S3. O S3 j√° est√° habilitado para a Web. Cada objeto j√° tem uma URL que voc√™ pode controlar os direitos de acesso de quem pode ver ou gerenciar a imagem. √â distribu√≠da regionalmente, o que significa que tem 11 noves de durabilidade, ent√£o n√£o precisa se preocupar sobre estrat√©gias de backup. O S3 √© sua estrat√©gia de backup. Al√©m disso, a economia de custos √© substancial ultrapassando a mesma carga de armazenamento no EBS. Com a vantagem adicional de ser sem servidor, n√£o s√£o necess√°rias inst√¢ncias do Amazon EC2.</p>

<p align=justify>Mas se voc√™ tem um arquivo de v√≠deo de 80 gigabytes no qual est√° fazendo corre√ß√µes de edi√ß√£o. Para conhecer a melhor classe de armazenamento aqui, precisamos entender a diferen√ßa entre armazenamento de objetos e armazenamento de blocos. O armazenamento de objetos trata qualquer arquivo como um objeto completo e discreto. Isso √© √≥timo para documentos, imagens est√°ticas e arquivos de v√≠deo que t√™m o upload feito e s√£o consumidos como objetos inteiros, mas cada vez que h√° uma altera√ß√£o no objeto, voc√™ deve refazer o upload do arquivo inteiro. N√£o h√° atualiza√ß√µes delta. O armazenamento em bloco quebra esses arquivos em pequenos componentes ou blocos. Isso significa que, para esse arquivo de 80 gigabytes, quando voc√™ faz uma edi√ß√£o em uma cena no filme e salva essa altera√ß√£o, o mecanismo atualiza somente os blocos onde est√£o esses peda√ßos. Se voc√™ est√° fazendo um monte de micro edi√ß√µes, usando o EBS, o armazenamento de blocos el√°sticos, √© o caso de uso perfeito. Se voc√™ estava usando o S3, toda vez que voc√™ salvasse as altera√ß√µes, o sistema teria que fazer upload de todos os 80 gigabytes, o arquivo todo, toda vez.</p>

<p align=justify>Isto significa que, se voc√™ estiver usando objetos completos ou apenas altera√ß√µes ocasionais, o S3 √© o vitorioso. Se voc√™ est√° executando fun√ß√µes complexas de leitura, corre√ß√£o, altera√ß√£o, ent√£o, com certeza, o EBS √© o vencedor do nocaute. Seu vencedor depende da sua carga de trabalho individual. Cada servi√ßo √© o certo para necessidades espec√≠ficas.</p>